<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promises Example</title>
</head>
<body>
    

    <script>
         let stocks={
            Fruits:['Grapes','Banana','Apple','Strawbeery','Mango'],
            liquild:['Water','Ice'],
            holder:['Cone','Cup','Stick'],
            toppings:['Chocolate','Peanuts']
        };

        let is_shop_open=true //false...error handling(catch)

        let order=(time,work)=>{
            return new Promise((resolve,reject)=>{
                if(is_shop_open){
                    setTimeout(()=>{resolve(work())},time)
                }
                else{
                    reject(console.log("our shop is closed"))
                }
            });
        };

        order(2000,()=>console.log(`${stocks.Fruits[4]} was selected`))

        .then(()=>{
            return order(1000,()=>console.log("Production has started"));
         })
        .then(()=>{
            return order(1000,()=>console.log("The fruit was chopped"));
         })

       .then(()=>{
            return order(1500,()=>console.log(`${stocks.liquild[0]} and ${stocks.liquild[1]} was selected`));
         })

         .then(()=>{
            return order(2000,()=>console.log("Start the machine"));
         })
         
         .then(()=>{
            console.log(`ice cream placed on ${stocks.holder[0]}`)
         })

         .then(()=>{
            return order(3000,()=>console.log(`${stocks.toppings[0]} was selected`));
         })

         .then(()=>{
            return order(2500,()=>console.log("Ice cream was served"));
         })
         .catch(()=>{
            console.log("Customer left")
            
         })

         .finally(()=>{
            console.log("Day ended , shop is closed.")
         })
    </script>
</body>
</html>